var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i,c;function r(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function l(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function u(e){let t;return l(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(l(t,n))}function p(e){return null==e?"":e}function h(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function b(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function $(){return v(" ")}function w(){return v("")}function k(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function L(e,t){e.value=null==t?"":t}function R(e,t,n){e.classList[n?"add":"remove"](t)}function U(e){c=e}function C(){if(!c)throw new Error("Function called outside component initialization");return c}function T(e){C().$$.on_mount.push(e)}function _(){const e=C();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const a=function(e,t,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,!1,t),s}(t,n);s.slice().forEach((t=>{t.call(e,a)}))}}}const S=[],A=[],j=[],z=[],E=Promise.resolve();let P=!1;function I(){P||(P=!0,E.then(N))}function H(e){j.push(e)}let M=!1;const O=new Set;function N(){if(!M){M=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];U(t),B(t.$$)}for(U(null),S.length=0;A.length;)A.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];O.has(t)||(O.add(t),t())}j.length=0}while(S.length);for(;z.length;)z.pop()();P=!1,M=!1,O.clear()}}function B(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const D=new Set;let q;function F(){q={r:0,c:[],p:q}}function W(){q.r||s(q.c),q=q.p}function G(e,t){e&&e.i&&(D.delete(e),e.i(t))}function Y(e,t,n,s){if(e&&e.o){if(D.has(e))return;D.add(e),q.c.push((()=>{D.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function J(e,t){const n=t.token={};function s(e,s,a,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==a&&(i=i.slice(),i[a]=o);const c=e&&(t.current=e)(i);let r=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(F(),Y(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),W())})):t.block.d(1),c.c(),G(c,1),c.m(t.mount(),t.anchor),r=!0),t.block=c,t.blocks&&(t.blocks[s]=c),r&&N()}if((a=e)&&"object"==typeof a&&"function"==typeof a.then){const n=C();if(e.then((e=>{U(n),s(t.then,1,t.value,e),U(null)}),(e=>{if(U(n),s(t.catch,2,t.error,e),U(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var a}function X(e,t,n){const s=t.slice(),{resolved:a}=e;e.current===e.then&&(s[e.value]=a),e.current===e.catch&&(s[e.error]=a),e.block.p(s,n)}function Z(e){e&&e.c()}function K(e,n,o,i){const{fragment:c,on_mount:r,on_destroy:l,after_update:u}=e.$$;c&&c.m(n,o),i||H((()=>{const n=r.map(t).filter(a);l?l.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(H)}function Q(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,a,o,i,r,l,u,d=[-1]){const p=c;U(t);const h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:a.target||p.$$.root};u&&u(h.root);let f=!1;if(h.ctx=o?o(t,a.props||{},((e,n,...s)=>{const a=s.length?s[0]:n;return h.ctx&&r(h.ctx[e],h.ctx[e]=a)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](a),f&&function(e,t){-1===e.$$.dirty[0]&&(S.push(e),I(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],h.update(),f=!0,s(h.before_update),h.fragment=!!i&&i(h.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);h.fragment&&h.fragment.l(e),e.forEach(m)}else h.fragment&&h.fragment.c();a.intro&&G(t.$$.fragment),K(t,a.target,a.anchor,a.customElement),N()}U(p)}class ee{$destroy(){Q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function te(t){let n;return{c(){n=g("footer"),n.innerHTML='<div class="content has-text-centered"><p>The source code is licensed\n            <a href="http://opensource.org/licenses/mit-license.php" class="svelte-efirqy">MIT</a></p> \n        <p>~ Made with ❤️ and ☕️ by\n            <a href="https://amhopkins.com" class="svelte-efirqy">Adam Hopkins</a> ~</p></div>',y(n,"class","footer")},m(e,t){f(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class ne extends ee{constructor(e){super(),V(this,e,null,te,o,{})}}function se(t){let n;return{c(){n=g("section"),n.innerHTML='<div class="hero-body"><p class="title">Python Web Development with <em class="svelte-1qewutj">Sanic</em></p> \n        <p class="subtitle">Using a next generation framework to improve your skills and the\n            speed and scalability of web apps</p> \n        <p class="subtitle">By, <strong><a href="https://github.com/ahopkins" target="_blank" class="svelte-1qewutj">Adam Hopkins</a></strong></p></div>',y(n,"class","hero has-background-black is-dark")},m(e,t){f(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class ae extends ee{constructor(e){super(),V(this,e,null,se,o,{})}}const oe=[];function ie(t,n=e){let s;const a=new Set;function i(e){if(o(t,e)&&(t=e,s)){const e=!oe.length;for(const e of a)e[1](),oe.push(e,t);if(e){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,c=e){const r=[o,c];return a.add(r),1===a.size&&(s=n(i)||e),o(t),()=>{a.delete(r),0===a.size&&(s(),s=null)}}}}function ce(t,n,o){const i=!Array.isArray(t),c=i?[t]:t,r=n.length<2;return u=t=>{let o=!1;const u=[];let d=0,p=e;const h=()=>{if(d)return;p();const s=n(i?u[0]:u,t);r?t(s):p=a(s)?s:e},f=c.map(((e,t)=>l(e,(e=>{u[t]=e,d&=~(1<<t),o&&h()}),(()=>{d|=1<<t}))));return o=!0,h(),function(){s(f),p()}},{subscribe:ie(o,u).subscribe};var u}const re={};const le=function(){const{subscribe:e,set:t,update:n}=ie(re);return{subscribe:e,set:t,update:n,logout:()=>{t(re)},login:e=>{console.log("Logged in as...",e),t({...e})}}}();function ue(t){let n,a;return{c:e,m(e,s){n||(a=[k(document.body,"keyup",t[7]),k(document.body,"keydown",t[8])],n=!0)},p:e,i:e,o:e,d(e){n=!1,s(a)}}}function de(e,t,n){let s,a,{paused:o=!1}=t,{pauseOnInput:i=!1}=t;const c=_();let r=[],l=[];return e.$$set=e=>{"paused"in e&&n(0,o=e.paused),"pauseOnInput"in e&&n(1,i=e.pauseOnInput)},e.$$.update=()=>{4&e.$$.dirty&&n(3,s=r.join("-")),4&e.$$.dirty&&n(5,a=r.reduce(((e,t)=>({...e,[t]:!0})),{})),12&e.$$.dirty&&r.length>0&&c("combo",s)},[o,i,r,s,l,a,c,({key:e})=>{n(4,l=l.filter((t=>t!==e))),l.length>0||n(2,r=[])},({key:e,target:t})=>{i&&"BODY"!==t.tagName||(n(4,l=[...l,e]),o||(e in a?c("combo",s):n(2,r=[...r,e]),c(e),c("key",e)))}]}var pe=class extends ee{constructor(e){super(),V(this,e,de,ue,o,{paused:0,pauseOnInput:1})}};function he(e,t=300){let n;return(...s)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,s)}),t)}}function fe(e,t,n){const s=e.slice();return s[31]=t[n],s}function me(e){let t;function n(e,t){return e[8].ready?ge:be}let s=n(e),a=s(e);return{c(){t=g("span"),a.c(),y(t,"class","icon is-small is-left")},m(e,n){f(e,t,n),a.m(t,null)},p(e,o){s===(s=n(e))&&a?a.p(e,o):(a.d(1),a=s(e),a&&(a.c(),a.m(t,null)))},d(e){e&&m(t),a.d()}}}function be(e){let t,n;return{c(){t=g("i"),y(t,"class",n=p(e[1])+" svelte-1mwizbt")},m(e,n){f(e,t,n)},p(e,s){2&s[0]&&n!==(n=p(e[1])+" svelte-1mwizbt")&&y(t,"class",n)},d(e){e&&m(t)}}}function ge(t){let n;return{c(){n=g("i"),y(n,"class","fas fa-check")},m(e,t){f(e,n,t)},p:e,d(e){e&&m(n)}}}function ve(e){let t,n,s,a,o,i,c,r=e[6],l=[];for(let t=0;t<r.length;t+=1)l[t]=$e(fe(e,r,t));return{c(){t=g("div");for(let e=0;e<l.length;e+=1)l[e].c();n=$(),s=g("div"),a=g("div"),o=v(e[0]),y(a,"class","list-item-title has-text-grey svelte-1mwizbt"),y(s,"class","list-item is-clickable has-background-grey-lighter svelte-1mwizbt"),y(t,"class","list svelte-1mwizbt"),R(t,"is-open",e[11])},m(r,u){f(r,t,u);for(let e=0;e<l.length;e+=1)l[e].m(t,null);h(t,n),h(t,s),h(s,a),h(a,o),i||(c=k(s,"click",e[29]),i=!0)},p(e,s){if(524360&s[0]){let a;for(r=e[6],a=0;a<r.length;a+=1){const o=fe(e,r,a);l[a]?l[a].p(o,s):(l[a]=$e(o),l[a].c(),l[a].m(t,n))}for(;a<l.length;a+=1)l[a].d(1);l.length=r.length}1&s[0]&&x(o,e[0]),2048&s[0]&&R(t,"is-open",e[11])},d(e){e&&m(t),b(l,e),i=!1,c()}}}function $e(e){let t,n,s,a,o,i=e[3](e[31])+"";function c(){return e[28](e[31])}return{c(){t=g("div"),n=g("div"),s=v(i),y(n,"class","list-item-title svelte-1mwizbt"),y(t,"class","list-item is-clickable svelte-1mwizbt")},m(e,i){f(e,t,i),h(t,n),h(n,s),a||(o=k(t,"click",c),a=!0)},p(t,n){e=t,72&n[0]&&i!==(i=e[3](e[31])+"")&&x(s,i)},d(e){e&&m(t),a=!1,o()}}}function we(t){let n,a,o,i,c,r,l,u,d,p,b,v,w,x=t[1]&&me(t),U=t[6]&&ve(t);return{c(){n=g("div"),a=g("div"),o=g("input"),c=$(),x&&x.c(),r=$(),U&&U.c(),l=$(),u=g("div"),d=g("button"),p=g("i"),y(o,"class","input"),y(o,"type","text"),y(o,"id","input"),y(o,"placeholder",t[2]),o.disabled=i=!t[10],y(a,"class","control has-icons-left is-relative is-expanded"),R(a,"is-loading",t[9]),y(p,"class","fas fa-times"),y(d,"class","button is-dark"),d.disabled=b=!t[5]||!t[12],y(u,"class","control"),y(n,"class","field has-addons")},m(e,s){f(e,n,s),h(n,a),h(a,o),t[25](o),L(o,t[5]),h(a,c),x&&x.m(a,null),h(a,r),U&&U.m(a,null),h(n,l),h(n,u),h(u,d),h(d,p),v||(w=[k(o,"input",t[26]),k(o,"keyup",he(t[18],250)),k(o,"keydown",t[27]),k(o,"blur",t[17]),k(d,"click",t[20])],v=!0)},p(e,t){4&t[0]&&y(o,"placeholder",e[2]),1024&t[0]&&i!==(i=!e[10])&&(o.disabled=i),32&t[0]&&o.value!==e[5]&&L(o,e[5]),e[1]?x?x.p(e,t):(x=me(e),x.c(),x.m(a,r)):x&&(x.d(1),x=null),e[6]?U?U.p(e,t):(U=ve(e),U.c(),U.m(a,null)):U&&(U.d(1),U=null),512&t[0]&&R(a,"is-loading",e[9]),4128&t[0]&&b!==(b=!e[5]||!e[12])&&(d.disabled=b)},i:e,o:e,d(e){e&&m(n),t[25](null),x&&x.d(),U&&U.d(),v=!1,s(w)}}}function ke(t,n,s){let a,o,i,c,r,u=e,p=()=>(u(),u=l(w,(e=>s(8,a=e))),w);t.$$.on_destroy.push((()=>u()));let{text:h}=n,{icon:f}=n,{placeholder:m}=n,{searchFunction:b}=n,{display:g}=n,{prop:v}=n,{enabled:$=!1}=n,{selectedItem:w}=n;p();let k,y,x,{onReset:L}=n;const R=ie(!1);d(t,R,(e=>s(9,o=e)));const U=ie(!1);d(t,U,(e=>s(11,c=e)));const C=ie($);d(t,C,(e=>s(12,r=e)));const _=ie(!0),S=ce([C,_],(([e,t])=>e&&t));d(t,S,(e=>s(10,i=e))),T((()=>{w.subscribe((e=>{void 0===e.ready&&void 0===e[v]&&void 0===e.eid&&z(),e[v]&&e[v]!==k&&x!==document.activeElement&&(console.log("Setting in onMount",x,document.activeElement),s(5,k=e[v]))}))}));const j=e=>{w.update((t=>(t.eid=e.eid,t.ready=!0,t.item=e,t))),e.eid&&_.set(!1),e[v]&&(console.log("Setting in selectItem"),s(5,k=e[v])),U.set(!1)},z=()=>{console.log("reset"),U.set(!1),_.set(!0),s(5,k=""),w.set({eid:null,ready:null,[v]:null}),L&&L()};return t.$$set=e=>{"text"in e&&s(0,h=e.text),"icon"in e&&s(1,f=e.icon),"placeholder"in e&&s(2,m=e.placeholder),"searchFunction"in e&&s(21,b=e.searchFunction),"display"in e&&s(3,g=e.display),"prop"in e&&s(22,v=e.prop),"enabled"in e&&s(23,$=e.enabled),"selectedItem"in e&&p(s(4,w=e.selectedItem)),"onReset"in e&&s(24,L=e.onReset)},t.$$.update=()=>{8388608&t.$$.dirty[0]&&C.set($)},[h,f,m,g,w,k,y,x,a,o,i,c,r,R,U,C,S,e=>{(!k||k&&a.eid)&&U.set(!1)},async e=>{R.set(!0),s(6,y=await b(k)),U.set(!0),w.update((e=>(e[v]=k,e))),R.set(!1)},j,z,b,v,$,L,function(e){A[e?"unshift":"push"]((()=>{x=e,s(7,x)}))},function(){k=this.value,s(5,k)},()=>{return e=w,t=a.ready=!1,n=a,e.set(n),t;var e,t,n},e=>j(e),()=>j({eid:null})]}class ye extends ee{constructor(e){super(),V(this,e,ke,we,o,{text:0,icon:1,placeholder:2,searchFunction:21,display:3,prop:22,enabled:23,selectedItem:4,onReset:24},null,[-1,-1])}}const xe=ie([]);function Le(e){var t=document.cookie.match(RegExp("(?:^|;\\s*)"+e+"=([^;]*)"));return t?t[1]:null}async function Re(e,t,n,s,a,o,i){const c=`${e}/api/v1/books`;await fetch(c,{method:"POST",body:JSON.stringify({title:t,author:n,series:s,title_is_eid:a,author_is_eid:o,series_is_eid:i}),headers:{"content-type":"application/json","x-xsrf-token":Le("csrf_token")},credentials:"same-origin"})}function Ue(e){let t,n,a,o,i,c,r,l,u,d,p,b,w,x,L,U,C,T,_,S,A,j,z,E,P,I,H,M,O,N,B,D,q,F,W,J,X,V;return t=new pe({props:{paused:!e[0]}}),t.$on("Escape",e[15]),T=new ye({props:{searchFunction:e[9],selectedItem:e[6],text:e[3].shouldCreateBook,placeholder:"Python Web Development with Sanic",icon:"fas fa-book",prop:"title",display:Ce,enabled:!0,onReset:e[18]}}),z=new ye({props:{searchFunction:e[10],selectedItem:e[4],text:e[3].shouldCreateAuthor,placeholder:"Adam Hopkins",icon:"fas fa-user",prop:"name",display:Te,enabled:e[1]}}),M=new ye({props:{searchFunction:e[11],selectedItem:e[5],text:e[3].shouldCreateSeries,icon:"fas fa-list",prop:"name",display:_e,enabled:e[1]}}),{c(){Z(t.$$.fragment),n=$(),a=g("button"),a.innerHTML='<span class="icon"><i class="fas fa-plus"></i></span> \n    <span>Add a book</span>',o=$(),i=g("div"),c=g("div"),r=$(),l=g("div"),u=g("header"),d=g("p"),d.textContent="Add a book",p=$(),b=g("button"),w=$(),x=g("section"),L=g("div"),U=g("label"),U.textContent="Title",C=$(),Z(T.$$.fragment),_=$(),S=g("div"),A=g("label"),A.textContent="Author",j=$(),Z(z.$$.fragment),E=$(),P=g("div"),I=g("label"),I.textContent="Series",H=$(),Z(M.$$.fragment),O=$(),N=g("footer"),B=g("button"),D=v("Save"),F=$(),W=g("button"),W.textContent="Cancel",y(a,"class","button"),y(c,"class","modal-background"),y(d,"class","modal-card-title"),y(b,"class","delete"),y(b,"aria-label","close"),y(u,"class","modal-card-head"),y(U,"class","label required"),y(U,"for","bookName"),y(L,"class","field"),y(A,"class","label required"),y(A,"for","authorName"),y(S,"class","field"),y(I,"class","label"),y(I,"for","seriesName"),y(P,"class","field"),y(x,"class","modal-card-body"),y(B,"class","button is-success"),B.disabled=q=!e[2],y(W,"class","button"),y(N,"class","modal-card-foot"),y(l,"class","modal-card svelte-1y6fr79"),y(i,"class","modal"),R(i,"is-active",e[0])},m(s,m){K(t,s,m),f(s,n,m),f(s,a,m),f(s,o,m),f(s,i,m),h(i,c),h(i,r),h(i,l),h(l,u),h(u,d),h(u,p),h(u,b),h(l,w),h(l,x),h(x,L),h(L,U),h(L,C),K(T,L,null),h(x,_),h(x,S),h(S,A),h(S,j),K(z,S,null),h(x,E),h(x,P),h(P,I),h(P,H),K(M,P,null),h(l,O),h(l,N),h(N,B),h(B,D),h(N,F),h(N,W),J=!0,X||(V=[k(a,"click",e[16]),k(b,"click",e[17]),k(B,"click",e[12]),k(W,"click",e[13])],X=!0)},p(e,[n]){const s={};1&n&&(s.paused=!e[0]),t.$set(s);const a={};2&n&&(a.enabled=e[1]),z.$set(a);const o={};2&n&&(o.enabled=e[1]),M.$set(o),(!J||4&n&&q!==(q=!e[2]))&&(B.disabled=q),1&n&&R(i,"is-active",e[0])},i(e){J||(G(t.$$.fragment,e),G(T.$$.fragment,e),G(z.$$.fragment,e),G(M.$$.fragment,e),J=!0)},o(e){Y(t.$$.fragment,e),Y(T.$$.fragment,e),Y(z.$$.fragment,e),Y(M.$$.fragment,e),J=!1},d(e){Q(t,e),e&&m(n),e&&m(a),e&&m(o),e&&m(i),Q(T),Q(z),Q(M),X=!1,s(V)}}}const Ce=e=>`${e.title}`,Te=e=>`${e.name}`,_e=e=>`${e.name}`;function Se(e,t,n){let s,a,o,i,c,{baseURL:r}=t,l=!1;const u=_(),p=ie({});d(e,p,(e=>n(20,a=e)));const h=ie({});d(e,h,(e=>n(19,s=e)));const f=ie({});d(e,f,(e=>n(21,o=e)));const m=ce([f,p],(([e,t])=>e.ready&&t.ready));d(e,m,(e=>n(2,c=e)));const b=ce(f,(e=>!!e.ready&&!e.eid));function g(){n(0,l=!1),f.set({}),p.set({}),h.set({})}d(e,b,(e=>n(1,i=e))),f.subscribe((e=>{e.item&&e.item.author&&p.set({...e.item.author,ready:!0})}));return e.$$set=e=>{"baseURL"in e&&n(14,r=e.baseURL)},[l,i,c,{shouldCreateBook:"Book doesn't exist? Click to create a new one.",shouldCreateAuthor:"Author doesn't exist? Click to create a new one.",shouldCreateSeries:"Book series doesn't exist? Click to create a new one."},p,h,f,m,b,async function(e){const t=`${r}/api/v1/books?title=${e}`,n=await fetch(t);return(await n.json()).books},async function(e){const t=`${r}/api/v1/authors?name=${e}`,n=await fetch(t);return(await n.json()).authors},async function(e){const t=`${r}/api/v1/books/series?name=${e}`,n=await fetch(t);return(await n.json()).series},async function(){await Re(r,o.eid?o.eid:o.title,a.eid?a.eid:a.name,s.eid?s.eid:s.name,!!o.eid,!!a.eid,!!s.eid),u("bookCreated"),g()},g,r,()=>n(0,l=!1),()=>n(0,l=!l),()=>n(0,l=!1),()=>{p.set({}),h.set({})}]}class Ae extends ee{constructor(e){super(),V(this,e,Se,Ue,o,{baseURL:14})}}function je(t){let n,s,a,o,i,c,r,l,u,d,b=t[0].state+"";return{c(){n=g("div"),s=g("span"),a=v(b),o=$(),i=g("span"),c=g("i"),y(s,"class","tag is-dark svelte-1jajhw5"),y(c,"class",r=p(t[0].icon)+" svelte-1jajhw5"),y(i,"class",l=p(`tag ${t[0].class}`)+" svelte-1jajhw5"),y(n,"class","tags has-addons is-clickable")},m(e,r){f(e,n,r),h(n,s),h(s,a),h(n,o),h(n,i),h(i,c),u||(d=k(n,"click",t[1]),u=!0)},p(e,[t]){1&t&&b!==(b=e[0].state+"")&&x(a,b),1&t&&r!==(r=p(e[0].icon)+" svelte-1jajhw5")&&y(c,"class",r),1&t&&l!==(l=p(`tag ${e[0].class}`)+" svelte-1jajhw5")&&y(i,"class",l)},i:e,o:e,d(e){e&&m(n),u=!1,d()}}}function ze(e,t,n){let s,{baseURL:a}=t,{eid:o}=t,{state:i}=t;const c=["unread","reading","read"],r=ie(c.indexOf(i));const l=ce(r,(e=>{const t=c[e];return{state:(n=t,n?n.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "):""),class:2===e?"is-success":1===e?"is-info":"is-black",icon:2===e?"fas fa-check-circle":1===e?"fas fa-circle":"far fa-circle"};var n}));return d(e,l,(e=>n(0,s=e))),e.$$set=e=>{"baseURL"in e&&n(3,a=e.baseURL),"eid"in e&&n(4,o=e.eid),"state"in e&&n(5,i=e.state)},[s,async function(){let e,t=u(r)+1;t>=c.length&&(t=0),r.set(t),xe.update((n=>(n.forEach(((s,a)=>{s.eid===o&&(e=c[t],n[a].state=e)})),n))),await async function(e,t,n){const s=`${e}/api/v1/books/${t}/state`;await fetch(s,{method:"PUT",body:JSON.stringify({state:n}),headers:{"content-type":"application/json","x-xsrf-token":Le("csrf_token")},credentials:"same-origin"})}(a,o,e)},l,a,o,i]}class Ee extends ee{constructor(e){super(),V(this,e,ze,je,o,{baseURL:3,eid:4,state:5})}}function Pe(t){let n,s,a,o;return{c(){n=g("div"),s=g("i"),y(s,"class","fa-heart svelte-171bvlq"),R(s,"fas",t[0]),R(s,"far",!t[0]),y(n,"class","list-item-image is-clickable")},m(e,i){f(e,n,i),h(n,s),a||(o=k(n,"click",t[1]),a=!0)},p(e,[t]){1&t&&R(s,"fas",e[0]),1&t&&R(s,"far",!e[0])},i:e,o:e,d(e){e&&m(n),a=!1,o()}}}function Ie(e,t,n){let{baseURL:s}=t,{eid:a}=t,{isLoved:o}=t;return e.$$set=e=>{"baseURL"in e&&n(2,s=e.baseURL),"eid"in e&&n(3,a=e.eid),"isLoved"in e&&n(0,o=e.isLoved)},[o,async()=>{xe.update((e=>(e.forEach(((t,n)=>{t.eid===a&&(console.log(t,o),e[n].is_loved=!t.is_loved)})),e))),await async function(e,t){const n=`${e}/api/v1/books/${t}/love`;await fetch(n,{method:"PUT",headers:{"x-xsrf-token":Le("csrf_token")},credentials:"same-origin"})}(s,a)},s,a]}class He extends ee{constructor(e){super(),V(this,e,Ie,Pe,o,{baseURL:2,eid:3,isLoved:0})}}function Me(e,t,n){const s=e.slice();return s[2]=t[n],s}function Oe(e){let t;return{c(){t=g("em"),t.textContent="None! Time to go pick up a book."},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function Ne(e){let t,n,s,a=e[2].title+"";return{c(){t=g("span"),n=v(a),s=$(),y(t,"class","tag reading is-info is-large mx-1 my-1")},m(e,a){f(e,t,a),h(t,n),h(t,s)},p(e,t){1&t&&a!==(a=e[2].title+"")&&x(n,a)},d(e){e&&m(t)}}}function Be(e){let t,n="reading"===e[2].state&&Ne(e);return{c(){n&&n.c(),t=w()},m(e,s){n&&n.m(e,s),f(e,t,s)},p(e,s){"reading"===e[2].state?n?n.p(e,s):(n=Ne(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&m(t)}}}function De(t){let n,s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=Be(Me(t,s,e));let o=null;return s.length||(o=Oe()),{c(){n=g("div");for(let e=0;e<a.length;e+=1)a[e].c();o&&o.c(),y(n,"class","box")},m(e,t){f(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null);o&&o.m(n,null)},p(e,[t]){if(1&t){let i;for(s=e[0],i=0;i<s.length;i+=1){const o=Me(e,s,i);a[i]?a[i].p(o,t):(a[i]=Be(o),a[i].c(),a[i].m(n,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length,s.length?o&&(o.d(1),o=null):o||(o=Oe(),o.c(),o.m(n,null))}},i:e,o:e,d(e){e&&m(n),b(a,e),o&&o.d()}}}function qe(e,t,n){let s;const a=ce(xe,(e=>e.filter((e=>"reading"===e.state))));return d(e,a,(e=>n(0,s=e))),[s,a]}class Fe extends ee{constructor(e){super(),V(this,e,qe,De,o,{})}}function We(t){let n,s,a;return{c(){n=g("button"),n.innerHTML='<span class="icon"><i class="fas fa-plus"></i></span> \n    <span>Add <strong>PyWebDev w/ Sanic</strong></span>',y(n,"class","button is-sanic")},m(e,o){f(e,n,o),s||(a=k(n,"click",t[0]),s=!0)},p:e,i:e,o:e,d(e){e&&m(n),s=!1,a()}}}function Ge(e,t,n){let{baseURL:s}=t;const a=_();return e.$$set=e=>{"baseURL"in e&&n(1,s=e.baseURL)},[async function(){await Re(s,"xxdMkXiurxTKkZaiWNJs3F0D","xxdlvO0xjwsrUbooypcZwkJl",null,!0,!0,!1),a("bookCreated")},s]}class Ye extends ee{constructor(e){super(),V(this,e,Ge,We,o,{baseURL:1})}}function Je(e,t,n){const s=e.slice();return s[4]=t[n],s}function Xe(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ze(e){let t,n,s=e[2],a=[];for(let t=0;t<s.length;t+=1)a[t]=Qe(Je(e,s,t));const o=e=>Y(a[e],1,1,(()=>{a[e]=null}));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=w()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);f(e,t,s),n=!0},p(e,n){if(5&n){let i;for(s=e[2],i=0;i<s.length;i+=1){const o=Je(e,s,i);a[i]?(a[i].p(o,n),G(a[i],1)):(a[i]=Qe(o),a[i].c(),G(a[i],1),a[i].m(t.parentNode,t))}for(F(),i=s.length;i<a.length;i+=1)o(i);W()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)G(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Y(a[e]);n=!1},d(e){b(a,e),e&&m(t)}}}function Ke(e){let t,n,s=e[4].series.name+"";return{c(){t=g("small"),n=v(s),y(t,"class","svelte-1ehnfg6")},m(e,s){f(e,t,s),h(t,n)},p(e,t){4&t&&s!==(s=e[4].series.name+"")&&x(n,s)},d(e){e&&m(t)}}}function Qe(e){let t,n,s,a,o,i,c,r,l,u,d,p,b,w,k,L,R,U=e[4].title+"",C=e[4].author.name+"";n=new He({props:{baseURL:e[0],isLoved:e[4].is_loved,eid:e[4].eid}});let T=e[4].series&&Ke(e);return k=new Ee({props:{baseURL:e[0],state:e[4].state,eid:e[4].eid}}),{c(){t=g("div"),Z(n.$$.fragment),s=$(),a=g("div"),o=g("div"),i=v(U),c=$(),T&&T.c(),l=$(),u=g("div"),d=v("By "),p=v(C),b=$(),w=g("div"),Z(k.$$.fragment),L=$(),y(o,"class","list-item-title svelte-1ehnfg6"),y(o,"title",r=e[4].title),y(u,"class","list-item-description"),y(a,"class","list-item-content"),y(w,"class","list-item-controls"),y(t,"class","list-item")},m(e,r){f(e,t,r),K(n,t,null),h(t,s),h(t,a),h(a,o),h(o,i),h(o,c),T&&T.m(o,null),h(a,l),h(a,u),h(u,d),h(u,p),h(t,b),h(t,w),K(k,w,null),h(t,L),R=!0},p(e,t){const s={};1&t&&(s.baseURL=e[0]),4&t&&(s.isLoved=e[4].is_loved),4&t&&(s.eid=e[4].eid),n.$set(s),(!R||4&t)&&U!==(U=e[4].title+"")&&x(i,U),e[4].series?T?T.p(e,t):(T=Ke(e),T.c(),T.m(o,null)):T&&(T.d(1),T=null),(!R||4&t&&r!==(r=e[4].title))&&y(o,"title",r),(!R||4&t)&&C!==(C=e[4].author.name+"")&&x(p,C);const a={};1&t&&(a.baseURL=e[0]),4&t&&(a.state=e[4].state),4&t&&(a.eid=e[4].eid),k.$set(a)},i(e){R||(G(n.$$.fragment,e),G(k.$$.fragment,e),R=!0)},o(e){Y(n.$$.fragment,e),Y(k.$$.fragment,e),R=!1},d(e){e&&m(t),Q(n),T&&T.d(),Q(k)}}}function Ve(t){let n;return{c(){n=v("loading")},m(e,t){f(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}function et(e){let t,n,s,a,o,i,c,r,l,u,d,p,b,v,w,k,x,L,R;r=new Ae({props:{baseURL:e[0]}}),r.$on("bookCreated",e[3]),u=new Ye({props:{baseURL:e[0]}}),u.$on("bookCreated",e[3]);let U={ctx:e,current:null,token:null,hasCatch:!1,pending:Ve,then:Ze,catch:Xe,blocks:[,,,]};return J(b=e[1],U),L=new Fe({}),{c(){t=g("h2"),t.textContent="My Library",n=$(),s=g("div"),a=g("div"),o=g("h3"),o.textContent="Books I have",i=$(),c=g("div"),Z(r.$$.fragment),l=$(),Z(u.$$.fragment),d=$(),p=g("div"),U.block.c(),v=$(),w=g("div"),k=g("h3"),k.textContent="Books I am reading",x=$(),Z(L.$$.fragment),y(t,"class","title is-2"),y(o,"class","title is-4"),y(c,"class","container"),y(p,"class","list has-visible-pointer-controls has-overflow-ellipsis svelte-1ehnfg6"),y(a,"class","column is-half"),y(k,"class","title is-4"),y(w,"class","column is-half"),y(s,"class","columns")},m(e,m){f(e,t,m),f(e,n,m),f(e,s,m),h(s,a),h(a,o),h(a,i),h(a,c),K(r,c,null),h(c,l),K(u,c,null),h(a,d),h(a,p),U.block.m(p,U.anchor=null),U.mount=()=>p,U.anchor=null,h(s,v),h(s,w),h(w,k),h(w,x),K(L,w,null),R=!0},p(t,[n]){e=t;const s={};1&n&&(s.baseURL=e[0]),r.$set(s);const a={};1&n&&(a.baseURL=e[0]),u.$set(a),U.ctx=e,2&n&&b!==(b=e[1])&&J(b,U)||X(U,e,n)},i(e){R||(G(r.$$.fragment,e),G(u.$$.fragment,e),G(U.block),G(L.$$.fragment,e),R=!0)},o(e){Y(r.$$.fragment,e),Y(u.$$.fragment,e);for(let e=0;e<3;e+=1){Y(U.blocks[e])}Y(L.$$.fragment,e),R=!1},d(e){e&&m(t),e&&m(n),e&&m(s),Q(r),Q(u),U.block.d(),U.token=null,U=null,Q(L)}}}function tt(e,t,n){let s;d(e,xe,(e=>n(2,s=e)));let a,{baseURL:o}=t;const i=()=>{n(1,a=async function(e){const t=`${e}/api/v1/books?current_user=true`,n=await fetch(t,{headers:{"x-xsrf-token":Le("csrf_token")},credentials:"same-origin"}),s=(await n.json()).books;xe.update((e=>{const t=e.map((e=>e.eid));return[...e,...s.filter((e=>!t.includes(e.eid)))]}))}(o))};return T(i),e.$$set=e=>{"baseURL"in e&&n(0,o=e.baseURL)},[o,a,s,i]}class nt extends ee{constructor(e){super(),V(this,e,tt,et,o,{baseURL:0})}}function st(t){let n;return{c(){n=g("section"),n.innerHTML='<nav class="level"><div class="level-item has-text-centered"><div><p class="heading">Source code</p> \n                <p class="title"><a href="https://github.com/PacktPublishing/Web-Development-with-Sanic" target="_blank" class="svelte-ph23zn">GitHub</a></p></div></div> \n        <div class="level-item has-text-centered"><div><p class="heading">Buy now</p> \n                <p class="title"><a href="https://www.amazon.com/dp/1801814414" target="_blank" class="svelte-ph23zn">Amazon</a></p></div></div> \n        <div class="level-item has-text-centered"><div><p class="heading">Publisher</p> \n                <p class="title"><a href="https://www.packtpub.com/product/python-web-development-with-sanic/9781801814416" target="_blank" class="svelte-ph23zn">Packt Publishers</a></p></div></div></nav>',y(n,"class","section svelte-ph23zn")},m(e,t){f(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class at extends ee{constructor(e){super(),V(this,e,null,st,o,{})}}function ot(t){let n,s,a,o,i,c,r,l,u,d,p,b,w,k,L,R,U,C,T,_,S;return{c(){n=g("section"),n.innerHTML='<div class="container"><div class="columns is-centered"><div class="column is-two-thirds-tablet is-half-desktop"><h3 class="is-size-3">About this book</h3> \n                <p class="svelte-7ex9vn">Today’s developers need something more powerful and\n                    customizable when it comes to web app development. They\n                    require effective tools to build something unique to meet\n                    their specific needs, and not simply glue a bunch of things\n                    together built by others. This is where Sanic comes into the\n                    picture. Built to be unopinionated and scalable, Sanic is a\n                    next-generation Python framework and server tuned for high\n                    performance.</p> \n                <p class="svelte-7ex9vn">This Sanic guide starts by helping you understand Sanic’s\n                    purpose, significance, and use cases. You’ll learn how to\n                    spot different issues when building web applications, and\n                    how to choose, create, and adapt the right solution to meet\n                    your requirements. As you progress, you’ll understand how to\n                    use listeners, middleware, and background tasks to customize\n                    your application. The book will also take you through\n                    real-world examples, so you will walk away with practical\n                    knowledge and not just code snippets.</p> \n                <p class="svelte-7ex9vn">By the end of this web development book, you’ll have gained\n                    the knowledge you need to design, build, and deploy\n                    high-performance, scalable, and maintainable web\n                    applications with the Sanic framework.</p></div></div></div>',s=$(),a=g("section"),o=g("div"),i=g("div"),c=g("div"),r=g("h3"),r.textContent="About this website",l=$(),u=g("p"),u.innerHTML='This website is the web applicaiton from <a href="https://github.com/PacktPublishing/Python-Web-Development-with-Sanic/tree/main/Chapter11" class="svelte-7ex9vn">Chapter 11, <em>A Complete Real-World Example</em> of the\n                        book.</a>',d=$(),p=g("p"),p.textContent="You are invited to play around with the application by\n                    logging in with GitHub, interacting with the API, and\n                    reviewing the source code.",b=$(),w=g("ul"),k=g("li"),L=v("API Docs: "),R=g("a"),U=v(t[0]),C=v("/docs"),_=$(),S=g("li"),S.innerHTML='Deployed source code: <a href="https://github.com/ahopkins/sanicbook" class="svelte-7ex9vn">ahopkins/sanicbook</a>',y(n,"class","section has-background-grey-darker"),y(r,"class","is-size-3"),y(u,"class","svelte-7ex9vn"),y(p,"class","svelte-7ex9vn"),y(R,"href",T=t[0]+"/docs"),y(R,"class","svelte-7ex9vn"),y(c,"class","column is-two-thirds-tablet is-half-desktop"),y(i,"class","columns is-centered"),y(o,"class","container"),y(a,"class","section has-background-black-bis")},m(e,t){f(e,n,t),f(e,s,t),f(e,a,t),h(a,o),h(o,i),h(i,c),h(c,r),h(c,l),h(c,u),h(c,d),h(c,p),h(c,b),h(c,w),h(w,k),h(k,L),h(k,R),h(R,U),h(R,C),h(w,_),h(w,S)},p(e,[t]){1&t&&x(U,e[0]),1&t&&T!==(T=e[0]+"/docs")&&y(R,"href",T)},i:e,o:e,d(e){e&&m(n),e&&m(s),e&&m(a)}}}function it(e,t,n){let{baseURL:s}=t;return e.$$set=e=>{"baseURL"in e&&n(0,s=e.baseURL)},[s]}class ct extends ee{constructor(e){super(),V(this,e,it,ot,o,{baseURL:0})}}function rt(e){let t,n,s,a,o,i;return s=new at({}),o=new ct({props:{baseURL:e[0]}}),{c(){t=g("section"),t.innerHTML='<div class="container"><div class="columns"><div class="column is-narrow has-text-centered"><img src="/images/SanicCoverFinal.png" alt="Python Web Development with Sanic" style="max-height: 500px;"/></div> \n            <div class="column is-flex is-flex-direction-column is-justify-content-center"><h2 class="title">Level up your Python and web development skills</h2> \n\n                <div class="is-size-3 mt-5">with\n                    <a href="https://amhopkins.com" class="svelte-vajlfp">Adam Hopkins</a>, one of the\n                    core developers of <em class="svelte-vajlfp">Sanic</em></div></div></div></div>',n=$(),Z(s.$$.fragment),a=$(),Z(o.$$.fragment),y(t,"class","section")},m(e,c){f(e,t,c),f(e,n,c),K(s,e,c),f(e,a,c),K(o,e,c),i=!0},p(e,[t]){const n={};1&t&&(n.baseURL=e[0]),o.$set(n)},i(e){i||(G(s.$$.fragment,e),G(o.$$.fragment,e),i=!0)},o(e){Y(s.$$.fragment,e),Y(o.$$.fragment,e),i=!1},d(e){e&&m(t),e&&m(n),Q(s,e),e&&m(a),Q(o,e)}}}function lt(e,t,n){let{baseURL:s}=t;return e.$$set=e=>{"baseURL"in e&&n(0,s=e.baseURL)},[s]}class ut extends ee{constructor(e){super(),V(this,e,lt,rt,o,{baseURL:0})}}function dt(e){let t,n,s,a,o,i;return s=new nt({props:{baseURL:e[0]}}),{c(){t=g("section"),n=g("div"),Z(s.$$.fragment),a=$(),o=g("section"),o.innerHTML='<div class="container"><div class="columns is-centered"><div class="column is-two-thirds-tablet is-half-desktop"><p>The above <strong>My Library</strong> is a playground for\n                        you to interact with. You are invited to review the source\n                        code for Chapter 11 while playing with this application.\n                        You should also try interacting with the API directly.</p> \n                    <p>As always, if you have questions ping me on Twitter or\n                        on the Sanic Discord server.</p></div></div></div>',y(n,"class","container"),y(t,"class","section"),y(o,"class","section has-background-black-ter")},m(e,c){f(e,t,c),h(t,n),K(s,n,null),f(e,a,c),f(e,o,c),i=!0},p(e,t){const n={};1&t&&(n.baseURL=e[0]),s.$set(n)},i(e){i||(G(s.$$.fragment,e),i=!0)},o(e){Y(s.$$.fragment,e),i=!1},d(e){e&&m(t),Q(s),e&&m(a),e&&m(o)}}}function pt(e){let t,n,s,a=e[1].me&&dt(e);return n=new ut({props:{baseURL:e[0]}}),{c(){a&&a.c(),t=$(),Z(n.$$.fragment)},m(e,o){a&&a.m(e,o),f(e,t,o),K(n,e,o),s=!0},p(e,[s]){e[1].me?a?(a.p(e,s),2&s&&G(a,1)):(a=dt(e),a.c(),G(a,1),a.m(t.parentNode,t)):a&&(F(),Y(a,1,1,(()=>{a=null})),W());const o={};1&s&&(o.baseURL=e[0]),n.$set(o)},i(e){s||(G(a),G(n.$$.fragment,e),s=!0)},o(e){Y(a),Y(n.$$.fragment,e),s=!1},d(e){a&&a.d(e),e&&m(t),Q(n,e)}}}function ht(e,t,n){let s;d(e,le,(e=>n(1,s=e)));let{baseURL:a}=t;return e.$$set=e=>{"baseURL"in e&&n(0,a=e.baseURL)},[a,s]}class ft extends ee{constructor(e){super(),V(this,e,ht,pt,o,{baseURL:0})}}function mt(e){this.message=e}mt.prototype=new Error,mt.prototype.name="InvalidCharacterError";var bt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new mt("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,s,a=0,o=0,i="";s=t.charAt(o++);~s&&(n=a%4?64*n+s:s,a++%4)?i+=String.fromCharCode(255&n>>(-2*a&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return i};function gt(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(bt(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return bt(t)}}function vt(e){this.message=e}vt.prototype=new Error,vt.prototype.name="InvalidTokenError";const $t=async(e,t,n=!1)=>{const s=u(le);if(t){if(!n){if(200!==(await kt(e)).status){200!==(await wt(e)).status&&(a="access_token",document.cookie.split(";").some((e=>e.trim().startsWith(a+"=")))&&(document.cookie=a+"="+(o?";path="+o:"")+(i?";domain="+i:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT"),window.location.href=e)}}if(!s.me){const n=function(e,t){if("string"!=typeof e)throw new vt("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(gt(e.split(".")[n]))}catch(e){throw new vt("Invalid token specified: "+e.message)}}(t),s=.75*(n.exp-Date.now()/1e3);setInterval(wt,1e3*s,e),n.user&&le.login({me:n.user})}return le.me}var a,o,i;return await wt(e),null},wt=async e=>{const t=await fetch(`${e}/api/v1/auth/refresh`,{method:"POST"});return 200===t.status&&await $t(e,Le("access_token"),!0),t},kt=async e=>await fetch(`${e}/api/v1/auth/verify`);function yt(t){return{c:e,m:e,p:e,d:e}}function xt(e){let t;function n(e,t){return e[2].me?Rt:Lt}let s=n(e),a=s(e);return{c(){a.c(),t=w()},m(e,n){a.m(e,n),f(e,t,n)},p(e,o){s===(s=n(e))&&a?a.p(e,o):(a.d(1),a=s(e),a&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&m(t)}}}function Lt(e){let t,n,s,a,o;return{c(){t=g("a"),n=g("span"),n.textContent="Login with Github",s=$(),a=g("span"),a.innerHTML='<i class="fab fa-github"></i>',y(a,"class","icon is-small"),y(t,"href",o=`${e[1]}/api/v1/auth/github`),y(t,"class","button is-light"),y(t,"disabled",e[0])},m(e,o){f(e,t,o),h(t,n),h(t,s),h(t,a)},p(e,n){2&n&&o!==(o=`${e[1]}/api/v1/auth/github`)&&y(t,"href",o),1&n&&y(t,"disabled",e[0])},d(e){e&&m(t)}}}function Rt(e){let t,n,s,a,o,i,c,l,u,d=e[2].me.login+"";return{c(){t=g("a"),n=g("span"),s=v(d),a=$(),o=g("span"),i=g("img"),r(i.src,c=e[2].me.avatar)||y(i,"src",c),y(i,"alt",l=e[2].me.name),y(i,"class","avatar svelte-aasxo4"),y(o,"class","icon avatar-wrapper"),y(t,"href",u=e[2].me.profile),y(t,"class","button"),y(t,"target","_blank")},m(e,c){f(e,t,c),h(t,n),h(n,s),h(t,a),h(t,o),h(o,i)},p(e,n){4&n&&d!==(d=e[2].me.login+"")&&x(s,d),4&n&&!r(i.src,c=e[2].me.avatar)&&y(i,"src",c),4&n&&l!==(l=e[2].me.name)&&y(i,"alt",l),4&n&&u!==(u=e[2].me.profile)&&y(t,"href",u)},d(e){e&&m(t)}}}function Ut(e){let t,n,s,a,o;return{c(){t=g("a"),n=g("span"),n.textContent="Loading",s=$(),a=g("span"),a.innerHTML='<i class="fas fa-circle-notch fa-spin"></i>',y(a,"class","icon is-small"),y(t,"href",o=`${e[1]}/api/v1/auth/github`),y(t,"class","button is-light"),y(t,"disabled","")},m(e,o){f(e,t,o),h(t,n),h(t,s),h(t,a)},p(e,n){2&n&&o!==(o=`${e[1]}/api/v1/auth/github`)&&y(t,"href",o)},d(e){e&&m(t)}}}function Ct(t){let n,s,a,o,i,c,l,u,d,p,b,v,w,k,x={ctx:t,current:null,token:null,hasCatch:!1,pending:Ut,then:xt,catch:yt};return J(t[3],x),{c(){n=g("nav"),s=g("div"),a=g("a"),o=g("img"),c=$(),l=g("div"),u=g("div"),u.innerHTML='<a href="https://github.com/PacktPublishing/Web-Development-with-Sanic" class="navbar-item">Book Source Code</a> \n            <a href="/docs" class="navbar-item">Example API Docs</a> \n\n            <div class="navbar-item has-dropdown is-hoverable"><a href="http://" class="navbar-link">More</a> \n\n                <div class="navbar-dropdown"><a href="https://sanic.dev/en/help.html" class="navbar-item">Sanic Help</a> \n                    <a href="https://sanic.dev/en/" class="navbar-item">Sanic User Guide</a> \n                    <hr class="navbar-divider"/> \n                    <a href="https://twitter.com/AdmHpkns" class="navbar-item">Twitter: <strong>@admhpkns</strong></a> \n                    <a href="https://github.com/ahopkins" class="navbar-item">Github: <strong>/ahopkins</strong></a> \n                    <a href="https://discord.gg/FARQzAEMAA" class="navbar-item">Discord: <strong>Sanic</strong></a> \n                    <hr class="navbar-divider"/> \n                    <a href="https://github.com/ahopkins/sanicbook" class="navbar-item">Actual deployed source</a></div></div>',d=$(),p=g("div"),b=g("div"),v=g("div"),w=g("a"),w.innerHTML='<strong>Buy the book</strong> \n                        <span class="icon is-small"><i class="fas fa-book"></i></span>',k=$(),x.block.c(),r(o.src,i="https://raw.githubusercontent.com/huge-success/sanic-assets/master/png/sanic-framework-logo-simple-white-400x97.png")||y(o,"src","https://raw.githubusercontent.com/huge-success/sanic-assets/master/png/sanic-framework-logo-simple-white-400x97.png"),y(o,"width","112"),y(o,"height","28"),y(o,"alt","Sanic Framework"),y(a,"class","navbar-item"),y(a,"href",t[1]),y(s,"class","navbar-brand"),y(u,"class","navbar-start"),y(w,"href","https://www.amazon.com/dp/1801814414"),y(w,"class","button is-link"),y(v,"class","buttons"),y(b,"class","navbar-item"),y(p,"class","navbar-end"),y(l,"id","navbarBasicExample"),y(l,"class","navbar-menu"),y(n,"class","navbar svelte-aasxo4"),y(n,"role","navigation"),y(n,"aria-label","main navigation")},m(e,t){f(e,n,t),h(n,s),h(s,a),h(a,o),h(n,c),h(n,l),h(l,u),h(l,d),h(l,p),h(p,b),h(b,v),h(v,w),h(v,k),x.block.m(v,x.anchor=null),x.mount=()=>v,x.anchor=null},p(e,[n]){t=e,2&n&&y(a,"href",t[1]),X(x,t,n)},i:e,o:e,d(e){e&&m(n),x.block.d(),x.token=null,x=null}}}function Tt(e,t,n){let s;d(e,le,(e=>n(2,s=e)));let{authCode:a}=t,{baseURL:o}=t;const i=$t(o,Le("access_token"));return e.$$set=e=>{"authCode"in e&&n(0,a=e.authCode),"baseURL"in e&&n(1,o=e.baseURL)},[a,o,s,i]}class _t extends ee{constructor(e){super(),V(this,e,Tt,Ct,o,{authCode:0,baseURL:1})}}function St(e){let t;return{c(){t=g("textarea"),t.value=e[0],y(t,"class","svelte-15jkr7s")},m(n,s){f(n,t,s),e[6](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&m(t),e[6](null)}}}function At(e){let t,n;return{c(){t=g("em"),n=v(e[2])},m(e,s){f(e,t,s),h(t,n)},p(e,t){4&t&&x(n,e[2])},d(e){e&&m(t)}}}function jt(t){let n,s,a,o,i,c,r,l,u=null!=t[0]&&St(t),d=t[2]&&At(t);return{c(){u&&u.c(),n=$(),s=g("span"),a=g("i"),i=$(),d&&d.c(),c=w(),y(a,"class",o=`fas ${t[3]}`),y(s,"class","icon svelte-15jkr7s"),y(s,"title","Copy to clipboard")},m(e,o){u&&u.m(e,o),f(e,n,o),f(e,s,o),h(s,a),f(e,i,o),d&&d.m(e,o),f(e,c,o),r||(l=k(s,"click",t[4]),r=!0)},p(e,[t]){null!=e[0]?u?u.p(e,t):(u=St(e),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),8&t&&o!==(o=`fas ${e[3]}`)&&y(a,"class",o),e[2]?d?d.p(e,t):(d=At(e),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},i:e,o:e,d(e){u&&u.d(e),e&&m(n),e&&m(s),e&&m(i),d&&d.d(e),e&&m(c),r=!1,l()}}}function zt(e,t,n){let s,a=null,{value:o=null}=t,i=null,c="fa-copy";return e.$$set=e=>{"value"in e&&n(5,o=e.value)},[a,s,i,c,async function(){n(0,a=o),await(I(),E),s.focus(),s.select(),n(2,i="Copied");try{document.execCommand("copy")?(n(3,c="fa-check"),setTimeout((()=>{n(2,i=null),n(3,c="fa-copy")}),5e3)):(n(2,i="Oops, unable to copy"),n(3,c="fa-times"))}catch(e){n(2,i="Oops, unable to copy"),n(3,c="fa-times")}n(0,a=null)},o,function(e){A[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class Et extends ee{constructor(e){super(),V(this,e,zt,jt,o,{value:5})}}function Pt(t){let n,s,a;return{c(){n=g("button"),n.innerHTML='<span>Continue</span> \n                        <span class="icon is-small"><i class="fas fa-arrow-alt-circle-right"></i></span>',y(n,"class","button is-link svelte-jbv8td")},m(e,o){f(e,n,o),s||(a=k(n,"click",t[5]),s=!0)},p:e,d(e){e&&m(n),s=!1,a()}}}function It(t){let n;return{c(){n=g("button"),n.textContent="Authorization code used",y(n,"class","button svelte-jbv8td"),n.disabled=!0},m(e,t){f(e,n,t)},p:e,d(e){e&&m(n)}}}function Ht(e){let t,n,s,a,o;return{c(){t=g("div"),n=v("An error occurred while trying to verify your authorization\n                code.\n                "),s=g("a"),a=v("Try again"),y(s,"href",o=`${e[1]}/api/v1/auth/github`),y(s,"class","button is-small svelte-jbv8td"),y(t,"class","notification is-danger")},m(e,o){f(e,t,o),h(t,n),h(t,s),h(s,a)},p(e,t){2&t&&o!==(o=`${e[1]}/api/v1/auth/github`)&&y(s,"href",o)},d(e){e&&m(t)}}}function Mt(e){let t,n,s,a,o,i,c,r,l,u,d,p,b,w,k,L,R,U,C,T,_;function S(e,t){return e[2]?It:Pt}r=new Et({props:{value:e[0]}});let A=S(e),j=A(e);L=new Et({props:{value:e[4]}});let z=e[3]&&Ht(e);return{c(){t=g("section"),n=g("div"),s=g("div"),a=v("Your GitHub authorization code: "),o=g("strong"),i=v(e[0]),c=$(),Z(r.$$.fragment),l=$(),u=g("div"),d=v("You can either enter the web portal:\n\n            "),p=g("span"),j.c(),b=$(),w=g("div"),k=v("Or, use the authorization code to retrieve an access token for the\n            API:\n            "),Z(L.$$.fragment),R=$(),U=g("pre"),C=g("code"),C.textContent=`${e[4]}`,T=$(),z&&z.c(),y(s,"class","notification is-primary"),y(p,"class","has-addons"),y(u,"class","block"),y(w,"class","block"),y(n,"class","container"),y(t,"class","section is-large")},m(e,m){f(e,t,m),h(t,n),h(n,s),h(s,a),h(s,o),h(o,i),h(s,c),K(r,s,null),h(n,l),h(n,u),h(u,d),h(u,p),j.m(p,null),h(n,b),h(n,w),h(w,k),K(L,w,null),h(w,R),h(w,U),h(U,C),h(n,T),z&&z.m(n,null),_=!0},p(e,[t]){(!_||1&t)&&x(i,e[0]);const s={};1&t&&(s.value=e[0]),r.$set(s),A===(A=S(e))&&j?j.p(e,t):(j.d(1),j=A(e),j&&(j.c(),j.m(p,null))),e[3]?z?z.p(e,t):(z=Ht(e),z.c(),z.m(n,null)):z&&(z.d(1),z=null)},i(e){_||(G(r.$$.fragment,e),G(L.$$.fragment,e),_=!0)},o(e){Y(r.$$.fragment,e),Y(L.$$.fragment,e),_=!1},d(e){e&&m(t),Q(r),j.d(),Q(L),z&&z.d()}}}function Ot(e,t,n){let{authCode:s}=t,{baseURL:a}=t,o=!1,i=!1;const c=`curl ${a}/api/v1/auth -X POST \\\n    -H "Authorization: Code ${s}"`;return e.$$set=e=>{"authCode"in e&&n(0,s=e.authCode),"baseURL"in e&&n(1,a=e.baseURL)},[s,a,o,i,c,async()=>{n(2,o=!0);const e=await fetch(`${a}/api/v1/auth`,{method:"POST",headers:{authorization:`Code ${s}`}});200===e.status?window.location.href=a:(console.log({response:e}),n(3,i=!0))}]}class Nt extends ee{constructor(e){super(),V(this,e,Ot,Mt,o,{authCode:0,baseURL:1})}}function Bt(e){let t,n;return t=new ft({props:{baseURL:e[0]}}),{c(){Z(t.$$.fragment)},m(e,s){K(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.baseURL=e[0]),t.$set(s)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){Q(t,e)}}}function Dt(e){let t,n;return t=new Nt({props:{authCode:e[1],baseURL:e[0]}}),{c(){Z(t.$$.fragment)},m(e,s){K(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.baseURL=e[0]),t.$set(s)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){Q(t,e)}}}function qt(e){let t,n,s,a,o,i,c,r,l,u;n=new _t({props:{authCode:e[1],baseURL:e[0]}}),a=new ae({});const d=[Dt,Bt],p=[];return i=function(e,t){return e[1]?0:1}(e),c=p[i]=d[i](e),l=new ne({}),{c(){t=g("main"),Z(n.$$.fragment),s=$(),Z(a.$$.fragment),o=$(),c.c(),r=$(),Z(l.$$.fragment)},m(e,c){f(e,t,c),K(n,t,null),h(t,s),K(a,t,null),h(t,o),p[i].m(t,null),h(t,r),K(l,t,null),u=!0},p(e,[t]){const s={};1&t&&(s.baseURL=e[0]),n.$set(s),c.p(e,t)},i(e){u||(G(n.$$.fragment,e),G(a.$$.fragment,e),G(c),G(l.$$.fragment,e),u=!0)},o(e){Y(n.$$.fragment,e),Y(a.$$.fragment,e),Y(c),Y(l.$$.fragment,e),u=!1},d(e){e&&m(t),Q(n),Q(a),p[i].d(),Q(l)}}}function Ft(e,t,n){let{baseURL:s}=t;const a=new URLSearchParams(window.location.search).get("code");return e.$$set=e=>{"baseURL"in e&&n(0,s=e.baseURL)},[s,a]}return new class extends ee{constructor(e){super(),V(this,e,Ft,qt,o,{baseURL:0})}}({target:document.body,props:{baseURL:"https://sanicbook.com"}})}();
//# sourceMappingURL=bundle.js.map
